<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üç¶ Chop Manager PRO - Sistema Completo</title>
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/vendas.css">
    <link rel="stylesheet" href="css/produtos.css">
    <link rel="stylesheet" href="css/modals.css">
    <link rel="stylesheet" href="css/payment.css">
    <link rel="stylesheet" href="css/notifications.css">
    <link rel="stylesheet" href="css/relatorios.css">
    <link rel="stylesheet" href="css/fiados.css">
    <link rel="stylesheet" href="css/config.css">
    <link rel="stylesheet" href="css/responsive.css">
</head>
<body>
    <div class="app-container">
        <!-- HEADER -->
        <header class="header">
            <div class="logo">
                <div class="logo-icon">üç¶</div>
                <div class="logo-text">
                    <h1>CHOP <span>MANAGER</span> PRO</h1>
                    <div style="font-size: 14px; opacity: 0.9;">Sistema Completo de Vendas</div>
                </div>
            </div>
            
            <div style="display: flex; align-items: center; gap: 20px;">
                <div class="day-info">
                    <div id="currentDate" style="font-size: 16px; margin-bottom: 5px;">Carregando...</div>
                    <div id="currentTime" style="font-size: 24px; font-weight: 800; color: var(--accent);">00:00:00</div>
                </div>
                
                <button id="syncButton" class="btn-primary" style="
                    background: linear-gradient(135deg, var(--secondary), #FF4081);
                    padding: 10px 18px; 
                    font-size: 13px;
                    white-space: nowrap;">
                    <i class="fas fa-sync-alt"></i> Sincronizar
                </button>
            </div>
        </header>
        
        <!-- NAVEGA√á√ÉO -->
        <nav class="nav-tabs">
            <button class="nav-tab active" data-page="dashboard">
                <i class="fas fa-tachometer-alt"></i> Dashboard
            </button>
            <button class="nav-tab" data-page="vendas">
                <i class="fas fa-cash-register"></i> Vender
            </button>
            <button class="nav-tab" data-page="produtos">
                <i class="fas fa-ice-cream"></i> Produtos
            </button>
            <button class="nav-tab" data-page="fiados">
                <i class="fas fa-hand-holding-usd"></i> Fiados
            </button>
            <button class="nav-tab" data-page="relatorios">
                <i class="fas fa-chart-pie"></i> Relat√≥rios
            </button>
            <button class="nav-tab" data-page="config">
                <i class="fas fa-cog"></i> Configura√ß√µes
            </button>
        </nav>
        
        <!-- CONTE√öDO PRINCIPAL -->
        <main class="main-content">
            <!-- DASHBOARD -->
            <section id="dashboard" class="page active">
                <div class="page-title">
                    <i class="fas fa-tachometer-alt"></i>
                    <h2>Dashboard de Vendas</h2>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Faturamento Hoje</div>
                        <div class="stat-value" id="todayRevenue">R$ 0,00</div>
                        <div class="stat-icon">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Chops Vendidos</div>
                        <div class="stat-value" id="todayChops">0</div>
                        <div class="stat-icon">
                            <i class="fas fa-ice-cream"></i>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">M√©dia por Venda</div>
                        <div class="stat-value" id="avgSale">R$ 0,00</div>
                        <div class="stat-icon">
                            <i class="fas fa-calculator"></i>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Estoque Baixo</div>
                        <div class="stat-value" id="lowStock">0</div>
                        <div class="stat-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                    </div>
                </div>
                
                <!-- GR√ÅFICOS -->
                <div class="charts-container">
                    <div class="chart-card">
                        <h3 class="chart-title">
                            <i class="fas fa-chart-pie"></i> Produtos Mais Vendidos
                        </h3>
                        <canvas id="flavorsChart" height="200"></canvas>
                    </div>
                    
                    <div class="chart-card">
                        <h3 class="chart-title">
                            <i class="fas fa-chart-line"></i> Evolu√ß√£o Semanal
                        </h3>
                        <canvas id="weeklyChart" height="200"></canvas>
                    </div>
                </div>
                
                <!-- DASHBOARD GRID -->
                <div class="dashboard-grid">
                    <!-- √öLTIMAS VENDAS -->
                    <div class="recent-sales-container">
                        <div class="sales-header">
                            <h3><i class="fas fa-history"></i> √öltimas Vendas</h3>
                            <button class="btn-primary" id="btnVerTodas">
                                Ver Todas
                            </button>
                        </div>
                        <div id="recentSalesList" class="loading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Carregando √∫ltimas vendas...</p>
                        </div>
                    </div>
                    
                    <!-- PRODUTOS MAIS VENDIDOS -->
                    <div class="top-products-container">
                        <div class="sales-header">
                            <h3><i class="fas fa-crown"></i> Top Produtos</h3>
                            <button class="btn-primary" id="btnVerTodosProdutos">
                                Ver Todos
                            </button>
                        </div>
                        <div id="topProductsList" class="loading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Carregando produtos...</p>
                        </div>
                    </div>
                </div>
                
                <!-- ESTOQUE BAIXO -->
                <div class="low-stock-container" id="lowStockContainer" style="display: none;">
                    <div class="sales-header">
                        <h3><i class="fas fa-exclamation-triangle"></i> Estoque Baixo</h3>
                        <button class="btn-primary" id="btnReporEstoque">
                            Repor Estoque
                        </button>
                    </div>
                    <div id="lowStockList" class="loading">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Verificando estoque...</p>
                    </div>
                </div>
            </section>
            
            <!-- VENDAS -->
            <section id="vendas" class="page">
                <div class="page-title">
                    <i class="fas fa-cash-register"></i>
                    <h2>Vender Chop</h2>
                </div>
                
                <!-- PRODUTOS -->
                <div>
                    <h3 style="margin: 15px 0; color: var(--dark); font-size: 20px;">
                        <i class="fas fa-ice-cream"></i> Selecione os Produtos
                    </h3>
                    <div class="flavors-grid" id="productsGrid">
                        <div class="loading" style="grid-column: 1 / -1;">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Carregando produtos...</p>
                        </div>
                    </div>
                </div>
                
                <!-- CARRINHO -->
                <div class="cart-container">
                    <div class="cart-header">
                        <h3 class="cart-title">
                            <i class="fas fa-shopping-cart"></i> Carrinho
                        </h3>
                        <button class="btn-primary" style="background: var(--danger);" id="clearCart">
                            <i class="fas fa-trash"></i> Limpar
                        </button>
                    </div>
                    
                    <div class="cart-items-container" id="cartItems">
                        <div class="loading">
                            <i class="fas fa-shopping-cart"></i>
                            <p>Selecione os produtos para come√ßar</p>
                        </div>
                    </div>
                    
                    <div class="cart-summary">
                        <div class="summary-row">
                            <span>Total de Itens:</span>
                            <span id="totalItems">0</span>
                        </div>
                        <div class="summary-row">
                            <span>Valor Total:</span>
                            <span id="totalValue">R$ 0,00</span>
                        </div>
                        <div class="summary-total">
                            <span>TOTAL:</span>
                            <span id="totalToPay">R$ 0,00</span>
                        </div>
                    </div>
                    
                    <!-- FORMAS DE PAGAMENTO -->
                    <div style="margin: 20px 0;">
                        <h4 style="margin-bottom: 15px; color: var(--dark); font-size: 18px;">
                            <i class="fas fa-credit-card"></i> Forma de Pagamento
                        </h4>
                        <div class="payment-options">
                            <label class="payment-option">
                                <input type="radio" name="payment" value="dinheiro" checked>
                                <div class="payment-card">
                                    <span class="payment-icon">üíµ</span>
                                    <div class="payment-name">Dinheiro</div>
                                </div>
                            </label>
                            
                            <label class="payment-option">
                                <input type="radio" name="payment" value="cartao">
                                <div class="payment-card">
                                    <span class="payment-icon">üí≥</span>
                                    <div class="payment-name">Cart√£o</div>
                                </div>
                            </label>
                            
                            <label class="payment-option">
                                <input type="radio" name="payment" value="pix">
                                <div class="payment-card">
                                    <span class="payment-icon">üì±</span>
                                    <div class="payment-name">PIX</div>
                                </div>
                            </label>
                            
                            <label class="payment-option">
                                <input type="radio" name="payment" value="fiado">
                                <div class="payment-card">
                                    <span class="payment-icon">üìù</span>
                                    <div class="payment-name">Fiado</div>
                                </div>
                            </label>
                        </div>
                    </div>
                    
                    <button class="btn-primary" id="finalizeSale" disabled style="width: 100%;">
                        <i class="fas fa-check-circle"></i>
                        FINALIZAR VENDA
                    </button>
                </div>
            </section>
            
            <!-- PRODUTOS -->
            <section id="produtos" class="page">
                <div class="page-title">
                    <i class="fas fa-ice-cream"></i>
                    <h2>Gest√£o de Produtos</h2>
                </div>
                
                <div class="add-product-container">
                    <p style="color: var(--gray); font-size: 16px;">
                        Cadastre e gerencie seus produtos
                    </p>
                    <button class="add-product-btn" id="addProduct">
                        <i class="fas fa-plus"></i>
                        Novo Produto
                    </button>
                </div>
                
                <!-- FILTROS DE PRODUTOS -->
                <div class="products-filter">
                    <div class="filter-container">
                        <div class="filter-group">
                            <label class="filter-label">Filtrar por:</label>
                            <select id="productFilter" class="filter-select">
                                <option value="todos">Todos os Produtos</option>
                                <option value="estoque-baixo">Estoque Baixo</option>
                                <option value="mais-vendidos">Mais Vendidos</option>
                                <option value="ativos">Ativos</option>
                                <option value="inativos">Inativos</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label">Buscar:</label>
                            <input type="text" id="productSearch" class="filter-search" placeholder="Buscar produto...">
                        </div>
                    </div>
                </div>
                
                <div class="products-grid" id="productsList">
                    <div class="loading" style="grid-column: 1 / -1;">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Carregando produtos...</p>
                    </div>
                </div>
            </section>
            
            <!-- FIADOS -->
            <section id="fiados" class="page">
                <div class="page-title">
                    <i class="fas fa-hand-holding-usd"></i>
                    <h2>Controle de Fiados</h2>
                </div>
                
                <div class="add-product-container">
                    <p style="color: var(--gray); font-size: 16px;">
                        Gerencie vendas fiadas e recebimentos
                    </p>
                    <button class="novo-fiado-btn" id="novoFiado">
                        <i class="fas fa-plus"></i>
                        Novo Fiado
                    </button>
                </div>
                
                <!-- RESUMO DE FIADOS -->
                <div class="fiados-summary">
                    <div class="fiado-stat-card receber">
                        <div class="stat-label">Total a Receber</div>
                        <div class="stat-value" id="totalReceber">R$ 0,00</div>
                        <div class="stat-icon">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                    </div>
                    
                    <div class="fiado-stat-card recebido">
                        <div class="stat-label">Recebido M√™s</div>
                        <div class="stat-value" id="recebidoMes">R$ 0,00</div>
                        <div class="stat-icon">
                            <i class="fas fa-cash-register"></i>
                        </div>
                    </div>
                    
                    <div class="fiado-stat-card atraso">
                        <div class="stat-label">Clientes em Atraso</div>
                        <div class="stat-value" id="clientesAtraso">0</div>
                        <div class="stat-icon">
                            <i class="fas fa-exclamation-circle"></i>
                        </div>
                    </div>
                    
                    <div class="fiado-stat-card ativos">
                        <div class="stat-label">Fiados Ativos</div>
                        <div class="stat-value" id="fiadosAtivos">0</div>
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                    </div>
                </div>
                
                <!-- FILTROS -->
                <div class="fiados-filter">
                    <div class="fiados-filter-row">
                        <div class="filter-group">
                            <label class="filter-label">Status:</label>
                            <select id="filterStatus" class="filter-select">
                                <option value="todos">Todos</option>
                                <option value="pendente">Pendentes</option>
                                <option value="atrasado">Em Atraso</option>
                                <option value="pago">Pagos</option>
                                <option value="parcial">Parcialmente Pagos</option>
                            </select>
                        </div>
                        
                        <div class="filter-group">
                            <label class="filter-label">Buscar cliente:</label>
                            <input type="text" id="searchCliente" class="fiados-search" placeholder="Buscar cliente...">
                        </div>
                        
                        <button class="btn-primary" id="btnExportFiados">
                            <i class="fas fa-file-export"></i> Exportar
                        </button>
                    </div>
                </div>
                
                <!-- LISTA DE FIADOS -->
                <div class="cart-container">
                    <div id="fiadosList" class="loading">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Carregando fiados...</p>
                    </div>
                </div>
            </section>
            
            <!-- RELAT√ìRIOS -->
            <section id="relatorios" class="page">
                <div class="page-title">
                    <i class="fas fa-chart-pie"></i>
                    <h2>Relat√≥rios e Exporta√ß√£o</h2>
                </div>
                
                <!-- FILTROS -->
                <div class="reports-filter">
                    <div class="filter-row">
                        <div class="filter-group">
                            <label class="filter-label">Per√≠odo:</label>
                            <select id="reportPeriod" class="filter-select">
                                <option value="hoje">Hoje</option>
                                <option value="ontem">Ontem</option>
                                <option value="semana">Esta Semana</option>
                                <option value="mes" selected>Este M√™s</option>
                                <option value="ano">Este Ano</option>
                                <option value="personalizado">Personalizado</option>
                            </select>
                        </div>
                        
                        <div id="customDateRange" class="custom-date-range">
                            <div class="date-inputs">
                                <div class="filter-group">
                                    <label class="filter-label">De:</label>
                                    <input type="date" id="startDate" class="filter-input">
                                </div>
                                <div class="filter-group">
                                    <label class="filter-label">At√©:</label>
                                    <input type="date" id="endDate" class="filter-input">
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-left: auto;">
                            <button class="btn-primary" id="generateReportBtn">
                                <i class="fas fa-sync-alt"></i>
                                Gerar Relat√≥rio
                            </button>
                        </div>
                    </div>
                    
                    <!-- BOT√ïES DE EXPORTA√á√ÉO -->
                    <div class="export-buttons">
                        <button class="export-btn print" id="printReport">
                            <i class="fas fa-print"></i>
                            Imprimir Relat√≥rio
                        </button>
                    </div>
                </div>
                
                <!-- CONTE√öDO DO RELAT√ìRIO -->
                <div id="reportContent" class="report-content">
                    <div style="text-align: center; padding: 40px 20px; color: var(--gray);">
                        <i class="fas fa-chart-pie" style="font-size: 60px; margin-bottom: 15px; opacity: 0.3;"></i>
                        <p style="font-size: 16px;">Selecione um per√≠odo e clique em "Gerar Relat√≥rio"</p>
                    </div>
                </div>
            </section>
            
            <!-- CONFIGURA√á√ïES -->
            <section id="config" class="page">
                <div class="page-title">
                    <i class="fas fa-cog"></i>
                    <h2>Configura√ß√µes do Sistema</h2>
                </div>
                
                <div class="config-grid">
                    <!-- BACKUP -->
                    <div class="config-card">
                        <h3 class="config-card-header">
                            <i class="fas fa-database"></i> Backup de Dados
                        </h3>
                        <div class="config-card-body">
                            <p>Fa√ßa backup de todos os dados do sistema.</p>
                            <div class="backup-info">
                                <i class="fas fa-info-circle"></i> √öltimo backup: Nenhum
                            </div>
                        </div>
                        <button class="config-btn primary" id="backupBtn">
                            <i class="fas fa-save"></i>
                            Fazer Backup
                        </button>
                    </div>
                    
                    <!-- INFORMA√á√ïES -->
                    <div class="config-card">
                        <h3 class="config-card-header">
                            <i class="fas fa-info-circle"></i> Informa√ß√µes do Sistema
                        </h3>
                        <div class="config-card-body">
                            <div class="system-info">
                                <div class="info-item">
                                    <span class="info-label">Vers√£o:</span>
                                    <span class="info-value">Chop Manager PRO 2.1</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Produtos:</span>
                                    <span class="info-value" id="totalProducts">0</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Vendas:</span>
                                    <span class="info-value" id="totalSales">0</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Faturamento Total:</span>
                                    <span class="info-value" id="totalRevenue">R$ 0,00</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        
        <!-- FOOTER -->
        <footer class="footer">
            <p>üç¶ Sistema Chop Manager PRO - Vers√£o 2.1</p>
            <p style="margin-top: 8px; font-size: 12px; opacity: 0.8;">
                Sistema completo para gest√£o de vendas de sorvete
            </p>
        </footer>
    </div>
    
    <!-- MODAL DE PRODUTO -->
    <div class="modal-overlay" id="productModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fas fa-ice-cream"></i>
                    <span id="modalTitle">Novo Produto</span>
                </div>
                <button id="closeModal" class="close-modal">&times;</button>
            </div>
            
            <div class="modal-body">
                <form id="productForm">
                    <input type="hidden" id="productId">
                    
                    <!-- FOTO DO PRODUTO -->
                    <div class="form-group">
                        <label class="form-label">Foto do Produto (opcional)</label>
                        <div class="photo-upload-container" id="photoUploadContainer">
                            <div class="upload-icon">
                                <i class="fas fa-camera"></i>
                            </div>
                            <p class="upload-text">Clique para adicionar uma foto</p>
                            <p class="upload-subtext">Formatos: JPG, PNG (max. 2MB)</p>
                            <img id="photoPreview" class="photo-preview" alt="Preview da foto">
                        </div>
                        <input type="file" id="productPhoto" accept="image/*" style="display: none;">
                        <input type="hidden" id="productPhotoData">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Nome do Produto *</label>
                        <input type="text" id="productName" class="form-input" placeholder="Ex: Casquinha de Chocolate" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Descri√ß√£o</label>
                        <textarea id="productDescription" class="form-input form-textarea" rows="2" placeholder="Descreva o produto..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Pre√ßo (R$) *</label>
                        <input type="number" id="productPrice" class="form-input" step="0.01" min="0" placeholder="5.00" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Estoque Inicial *</label>
                        <input type="number" id="productStock" class="form-input" min="0" placeholder="100" required>
                    </div>
                    
                    <!-- PERSONALIZA√á√ÉO DE EMOJI -->
                    <div class="form-group">
                        <label class="form-label">Emoji do Produto</label>
                        <div class="emoji-selected" id="emojiSelector">
                            <div class="selected-emoji" id="selectedEmoji">üç¶</div>
                            <div class="emoji-instruction">Clique para escolher um emoji</div>
                        </div>
                        <div class="emoji-picker" id="emojiPicker">
                            <!-- Emojis ser√£o inseridos por JavaScript -->
                        </div>
                        <input type="hidden" id="productEmoji" value="üç¶">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Cor de Identifica√ß√£o</label>
                        <input type="color" id="productColor" value="#36B5B0" class="color-input">
                    </div>
                    
                    <div class="form-group">
                        <label class="checkbox-group">
                            <input type="checkbox" id="productActive" checked class="checkbox-input">
                            <span class="custom-checkbox"></span>
                            <span class="checkbox-label">Produto Ativo</span>
                        </label>
                    </div>
                </form>
            </div>
            
            <div class="modal-footer">
                <button id="cancelModal" class="btn-primary" style="background: var(--gray);">
                    Cancelar
                </button>
                <button id="saveProduct" class="btn-primary">
                    Salvar Produto
                </button>
            </div>
        </div>
    </div>
    
    <!-- NOTIFICA√á√ïES -->
    <div class="notification" id="notification"></div>

    <!-- JavaScript Files -->
    <script src="js/utils.js"></script>
    <script src="js/neon-api.js"></script>
    <script src="js/vendas.js"></script>
    <script src="js/produtos.js"></script>
    <script src="js/fiados.js"></script>
    <script src="js/relatorios.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
