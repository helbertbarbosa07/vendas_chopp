<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üç¶ Chop Manager PRO - Sistema Completo GIT</title>
    
    <!-- CDN de Bibliotecas -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Estilos CSS -->
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <div class="app-container">
        <!-- HEADER -->
        <header class="header">
            <div class="logo">
                <div class="logo-icon">üç¶</div>
                <div class="logo-text">
                    <h1>CHOP <span>MANAGER</span> PRO</h1>
                    <div class="logo-subtitle">Sistema Completo de Vendas</div>
                </div>
            </div>
            
            <div class="header-controls">
                <div class="day-info">
                    <div id="currentDate">Carregando...</div>
                    <div id="currentTime">00:00:00</div>
                </div>
                
                <button id="syncButton" class="sync-btn">
                    <i class="fas fa-sync-alt"></i> Sincronizar
                </button>
            </div>
        </header>
        
        <!-- NAVEGA√á√ÉO -->
        <nav class="nav-tabs">
            <button class="nav-tab active" data-page="dashboard">
                <i class="fas fa-tachometer-alt"></i> Dashboard
            </button>
            <button class="nav-tab" data-page="vendas">
                <i class="fas fa-cash-register"></i> Vender
            </button>
            <button class="nav-tab" data-page="produtos">
                <i class="fas fa-ice-cream"></i> Produtos
            </button>
            <button class="nav-tab" data-page="fiados">
                <i class="fas fa-hand-holding-usd"></i> Fiados
            </button>
            <button class="nav-tab" data-page="relatorios">
                <i class="fas fa-chart-pie"></i> Relat√≥rios
            </button>
            <button class="nav-tab" data-page="config">
                <i class="fas fa-cog"></i> Configura√ß√µes
            </button>
        </nav>
        
        <!-- CONTE√öDO PRINCIPAL -->
        <main class="main-content">
            <!-- DASHBOARD -->
            <section id="dashboard" class="page active">
                <div class="page-title">
                    <i class="fas fa-tachometer-alt"></i>
                    <h2>Dashboard de Vendas</h2>
                </div>
                
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Faturamento Hoje</div>
                        <div class="stat-value" id="todayRevenue">R$ 0,00</div>
                        <div class="stat-icon">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Chops Vendidos</div>
                        <div class="stat-value" id="todayChops">0</div>
                        <div class="stat-icon">
                            <i class="fas fa-ice-cream"></i>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">M√©dia por Venda</div>
                        <div class="stat-value" id="avgSale">R$ 0,00</div>
                        <div class="stat-icon">
                            <i class="fas fa-calculator"></i>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Estoque Baixo</div>
                        <div class="stat-value" id="lowStock">0</div>
                        <div class="stat-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                    </div>
                </div>
                
                <!-- GR√ÅFICOS -->
                <div class="charts-container">
                    <div class="chart-card">
                        <h3><i class="fas fa-chart-pie"></i> Produtos Mais Vendidos</h3>
                        <canvas id="flavorsChart" height="200"></canvas>
                    </div>
                    
                    <div class="chart-card">
                        <h3><i class="fas fa-chart-line"></i> Evolu√ß√£o Semanal</h3>
                        <canvas id="weeklyChart" height="200"></canvas>
                    </div>
                </div>
                
                <!-- DASHBOARD GRID -->
                <div class="dashboard-grid">
                    <!-- √öLTIMAS VENDAS -->
                    <div class="recent-sales-container">
                        <div class="section-header">
                            <h3><i class="fas fa-history"></i> √öltimas Vendas</h3>
                            <button class="btn-primary btn-small" id="btnVerTodas">
                                Ver Todas
                            </button>
                        </div>
                        <div id="recentSalesList" class="loading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Carregando √∫ltimas vendas...</p>
                        </div>
                    </div>
                    
                    <!-- PRODUTOS MAIS VENDIDOS -->
                    <div class="top-products-container">
                        <div class="section-header">
                            <h3><i class="fas fa-crown"></i> Top Produtos</h3>
                            <button class="btn-primary btn-small" id="btnVerTodosProdutos">
                                Ver Todos
                            </button>
                        </div>
                        <div id="topProductsList" class="loading">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Carregando produtos...</p>
                        </div>
                    </div>
                </div>
                
                <!-- ESTOQUE BAIXO -->
                <div class="low-stock-container" id="lowStockContainer" style="display: none;">
                    <div class="section-header">
                        <h3><i class="fas fa-exclamation-triangle"></i> Estoque Baixo</h3>
                        <button class="btn-primary btn-small" id="btnReporEstoque" style="background: var(--warning);">
                            Repor Estoque
                        </button>
                    </div>
                    <div id="lowStockList" class="loading">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Verificando estoque...</p>
                    </div>
                </div>
            </section>
            
            <!-- VENDAS -->
            <section id="vendas" class="page">
                <div class="page-title">
                    <i class="fas fa-cash-register"></i>
                    <h2>Vender Chop</h2>
                </div>
                
                <!-- PRODUTOS -->
                <div class="section-container">
                    <h3><i class="fas fa-ice-cream"></i> Selecione os Produtos</h3>
                    <div class="flavors-grid" id="productsGrid">
                        <div class="loading" style="grid-column: 1 / -1;">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>Carregando produtos...</p>
                        </div>
                    </div>
                </div>
                
                <!-- CARRINHO -->
                <div class="cart-container">
                    <div class="cart-header">
                        <h3><i class="fas fa-shopping-cart"></i> Carrinho</h3>
                        <button class="btn-primary btn-danger" id="clearCart">
                            <i class="fas fa-trash"></i> Limpar
                        </button>
                    </div>
                    
                    <div id="cartItems" class="cart-items">
                        <div class="empty-cart">
                            <i class="fas fa-shopping-cart"></i>
                            <p>Selecione os produtos para come√ßar</p>
                        </div>
                    </div>
                    
                    <div class="cart-summary">
                        <div class="summary-row">
                            <span>Total de Itens:</span>
                            <span id="totalItems">0</span>
                        </div>
                        <div class="summary-row">
                            <span>Valor Total:</span>
                            <span id="totalValue">R$ 0,00</span>
                        </div>
                        <div class="summary-total">
                            <span>TOTAL:</span>
                            <span id="totalToPay">R$ 0,00</span>
                        </div>
                    </div>
                    
                    <!-- FORMAS DE PAGAMENTO -->
                    <div class="payment-section">
                        <h4><i class="fas fa-credit-card"></i> Forma de Pagamento</h4>
                        <div class="payment-options">
                            <label class="payment-option">
                                <input type="radio" name="payment" value="dinheiro" checked>
                                <div class="payment-card">
                                    <span class="payment-icon">üíµ</span>
                                    <div class="payment-name">Dinheiro</div>
                                </div>
                            </label>
                            
                            <label class="payment-option">
                                <input type="radio" name="payment" value="cartao">
                                <div class="payment-card">
                                    <span class="payment-icon">üí≥</span>
                                    <div class="payment-name">Cart√£o</div>
                                </div>
                            </label>
                            
                            <label class="payment-option">
                                <input type="radio" name="payment" value="pix">
                                <div class="payment-card">
                                    <span class="payment-icon">üì±</span>
                                    <div class="payment-name">PIX</div>
                                </div>
                            </label>
                            
                            <label class="payment-option">
                                <input type="radio" name="payment" value="fiado">
                                <div class="payment-card">
                                    <span class="payment-icon">üìù</span>
                                    <div class="payment-name">Fiado</div>
                                </div>
                            </label>
                        </div>
                    </div>
                    
                    <button class="btn-primary btn-large" id="finalizeSale" disabled>
                        <i class="fas fa-check-circle"></i>
                        FINALIZAR VENDA
                    </button>
                </div>
            </section>
            
            <!-- PRODUTOS -->
            <section id="produtos" class="page">
                <div class="page-title">
                    <i class="fas fa-ice-cream"></i>
                    <h2>Gest√£o de Produtos</h2>
                </div>
                
                <div class="page-header">
                    <p>Cadastre e gerencie seus produtos</p>
                    <button class="btn-primary" id="addProduct">
                        <i class="fas fa-plus"></i>
                        Novo Produto
                    </button>
                </div>
                
                <!-- FILTROS DE PRODUTOS -->
                <div class="filters-container">
                    <div class="filter-group">
                        <label>Filtrar por:</label>
                        <select id="productFilter">
                            <option value="todos">Todos os Produtos</option>
                            <option value="estoque-baixo">Estoque Baixo</option>
                            <option value="mais-vendidos">Mais Vendidos</option>
                            <option value="ativos">Ativos</option>
                            <option value="inativos">Inativos</option>
                        </select>
                    </div>
                    
                    <div class="search-group">
                        <input type="text" id="productSearch" placeholder="Buscar produto...">
                    </div>
                </div>
                
                <div class="flavors-grid" id="productsList">
                    <div class="loading" style="grid-column: 1 / -1;">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Carregando produtos...</p>
                    </div>
                </div>
            </section>
            
            <!-- FIADOS -->
            <section id="fiados" class="page">
                <div class="page-title">
                    <i class="fas fa-hand-holding-usd"></i>
                    <h2>Controle de Fiados</h2>
                </div>
                
                <div class="page-header">
                    <p>Gerencie vendas fiadas e recebimentos</p>
                    <button class="btn-primary" id="novoFiado">
                        <i class="fas fa-plus"></i>
                        Novo Fiado
                    </button>
                </div>
                
                <!-- RESUMO DE FIADOS -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Total a Receber</div>
                        <div class="stat-value" id="totalReceber">R$ 0,00</div>
                        <div class="stat-icon">
                            <i class="fas fa-money-bill-wave"></i>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Recebido M√™s</div>
                        <div class="stat-value" id="recebidoMes">R$ 0,00</div>
                        <div class="stat-icon">
                            <i class="fas fa-cash-register"></i>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Clientes em Atraso</div>
                        <div class="stat-value" id="clientesAtraso">0</div>
                        <div class="stat-icon">
                            <i class="fas fa-exclamation-circle"></i>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-label">Fiados Ativos</div>
                        <div class="stat-value" id="fiadosAtivos">0</div>
                        <div class="stat-icon">
                            <i class="fas fa-users"></i>
                        </div>
                    </div>
                </div>
                
                <!-- FILTROS -->
                <div class="filters-container">
                    <div class="filter-group">
                        <label>Status:</label>
                        <select id="filterStatus">
                            <option value="todos">Todos</option>
                            <option value="pendente">Pendentes</option>
                            <option value="atrasado">Em Atraso</option>
                            <option value="pago">Pagos</option>
                            <option value="parcial">Parcialmente Pagos</option>
                        </select>
                    </div>
                    
                    <div class="search-group">
                        <input type="text" id="searchCliente" placeholder="Buscar cliente...">
                    </div>
                    
                    <button class="btn-primary" id="btnExportFiados">
                        <i class="fas fa-file-export"></i> Exportar
                    </button>
                </div>
                
                <!-- LISTA DE FIADOS -->
                <div class="content-container">
                    <div id="fiadosList" class="loading">
                        <i class="fas fa-spinner fa-spin"></i>
                        <p>Carregando fiados...</p>
                    </div>
                </div>
            </section>
            
            <!-- RELAT√ìRIOS -->
            <section id="relatorios" class="page">
                <div class="page-title">
                    <i class="fas fa-chart-pie"></i>
                    <h2>Relat√≥rios e Exporta√ß√£o</h2>
                </div>
                
                <!-- FILTROS -->
                <div class="filters-container">
                    <div class="filter-group">
                        <label>Per√≠odo:</label>
                        <select id="reportPeriod">
                            <option value="hoje">Hoje</option>
                            <option value="ontem">Ontem</option>
                            <option value="semana">Esta Semana</option>
                            <option value="mes" selected>Este M√™s</option>
                            <option value="ano">Este Ano</option>
                            <option value="personalizado">Personalizado</option>
                        </select>
                    </div>
                    
                    <div id="customDateRange" class="custom-range" style="display: none;">
                        <div class="date-range">
                            <div>
                                <label>De:</label>
                                <input type="date" id="startDate">
                            </div>
                            <div>
                                <label>At√©:</label>
                                <input type="date" id="endDate">
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn-primary" id="generateReportBtn">
                        <i class="fas fa-sync-alt"></i>
                        Gerar Relat√≥rio
                    </button>
                </div>
                
                <!-- BOT√ïES DE EXPORTA√á√ÉO -->
                <div class="export-buttons">
                    <button class="export-btn print" id="printReport">
                        <i class="fas fa-print"></i>
                        Imprimir Relat√≥rio
                    </button>
                </div>
                
                <!-- CONTE√öDO DO RELAT√ìRIO -->
                <div class="content-container" id="reportContent">
                    <div class="empty-state">
                        <i class="fas fa-chart-pie"></i>
                        <p>Selecione um per√≠odo e clique em "Gerar Relat√≥rio"</p>
                    </div>
                </div>
            </section>
            
            <!-- CONFIGURA√á√ïES -->
            <section id="config" class="page">
                <div class="page-title">
                    <i class="fas fa-cog"></i>
                    <h2>Configura√ß√µes do Sistema</h2>
                </div>
                
                <div class="settings-grid">
                    <!-- BACKUP -->
                    <div class="settings-card">
                        <h3><i class="fas fa-database"></i> Backup de Dados</h3>
                        <p>Fa√ßa backup de todos os dados do sistema.</p>
                        <button class="btn-primary btn-full" id="backupBtn">
                            <i class="fas fa-save"></i>
                            Fazer Backup
                        </button>
                    </div>
                    
                    <!-- INFORMA√á√ïES -->
                    <div class="settings-card">
                        <h3><i class="fas fa-info-circle"></i> Informa√ß√µes do Sistema</h3>
                        <div class="system-info">
                            <p><strong>Vers√£o:</strong> Chop Manager PRO 2.1</p>
                            <p><strong>Produtos:</strong> <span id="totalProducts">0</span></p>
                            <p><strong>Vendas:</strong> <span id="totalSales">0</span></p>
                            <p><strong>Faturamento Total:</strong> <span id="totalRevenue">R$ 0,00</span></p>
                        </div>
                    </div>
                </div>
            </section>
        </main>
        
        <!-- FOOTER -->
        <footer class="footer">
            <p>üç¶ Sistema Chop Manager PRO - Vers√£o 2.1</p>
            <p class="footer-subtitle">Sistema completo para gest√£o de vendas de sorvete</p>
        </footer>
    </div>
    
    <!-- MODAL DE PRODUTO -->
    <div class="modal-overlay" id="productModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">
                    <i class="fas fa-ice-cream"></i>
                    <span id="modalTitle">Novo Produto</span>
                </div>
                <button id="closeModal" class="modal-close">&times;</button>
            </div>
            
            <div class="modal-body">
                <form id="productForm">
                    <input type="hidden" id="productId">
                    
                    <!-- FOTO DO PRODUTO -->
                    <div class="form-group">
                        <label class="form-label">Foto do Produto (opcional)</label>
                        <div class="photo-upload-container" id="photoUploadContainer">
                            <div class="upload-icon">
                                <i class="fas fa-camera"></i>
                            </div>
                            <p>Clique para adicionar uma foto</p>
                            <p class="upload-hint">Formatos: JPG, PNG (max. 2MB)</p>
                            <img id="photoPreview" class="photo-preview" alt="Preview da foto">
                        </div>
                        <input type="file" id="productPhoto" accept="image/*" style="display: none;">
                        <input type="hidden" id="productPhotoData">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Nome do Produto *</label>
                        <input type="text" id="productName" class="form-input" placeholder="Ex: Casquinha de Chocolate" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Descri√ß√£o</label>
                        <textarea id="productDescription" class="form-input" rows="2" placeholder="Descreva o produto..."></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Pre√ßo (R$) *</label>
                        <input type="number" id="productPrice" class="form-input" step="0.01" min="0" placeholder="5.00" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Estoque Inicial *</label>
                        <input type="number" id="productStock" class="form-input" min="0" placeholder="100" required>
                    </div>
                    
                    <!-- PERSONALIZA√á√ÉO DE EMOJI -->
                    <div class="form-group">
                        <label class="form-label">Emoji do Produto</label>
                        <div class="emoji-selected" id="emojiSelector">
                            <span id="selectedEmoji">üç¶</span>
                            <span>Clique para escolher um emoji</span>
                        </div>
                        <div class="emoji-picker" id="emojiPicker">
                            <!-- Emojis ser√£o inseridos por JavaScript -->
                        </div>
                        <input type="hidden" id="productEmoji" value="üç¶">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Cor de Identifica√ß√£o</label>
                        <input type="color" id="productColor" value="#36B5B0">
                    </div>
                    
                    <div class="form-group checkbox-group">
                        <input type="checkbox" id="productActive" checked>
                        <label for="productActive">Produto Ativo</label>
                    </div>
                </form>
            </div>
            
            <div class="modal-footer">
                <button class="btn-secondary" id="cancelModal">
                    Cancelar
                </button>
                <button class="btn-primary" id="saveProduct">
                    Salvar Produto
                </button>
            </div>
        </div>
    </div>
    
    <!-- MODAL FIADO -->
    <div class="modal-overlay" id="fiadoModal">
        <div class="modal modal-large">
            <div class="modal-header fiado">
                <div class="modal-title">
                    <i class="fas fa-hand-holding-usd"></i>
                    <span id="modalFiadoTitle">Novo Fiado</span>
                </div>
                <button id="closeFiadoModal" class="modal-close">&times;</button>
            </div>
            
            <div class="modal-body">
                <form id="fiadoForm">
                    <input type="hidden" id="fiadoIndex">
                    
                    <div class="form-group">
                        <label class="form-label">Nome do Cliente *</label>
                        <input type="text" id="nomeCliente" class="form-input" placeholder="Nome completo" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Telefone</label>
                        <input type="text" id="telefoneCliente" class="form-input" placeholder="(11) 99999-9999">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Produtos *</label>
                        <div id="produtosFiadoContainer">
                            <!-- Produtos ser√£o adicionados dinamicamente -->
                        </div>
                        <button type="button" class="btn-primary btn-small" id="addProdutoFiado">
                            <i class="fas fa-plus"></i> Adicionar Produto
                        </button>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Prazo de Pagamento *</label>
                        <input type="date" id="prazoPagamento" class="form-input" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Data de Retirada</label>
                        <input type="date" id="dataRetirada" class="form-input">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Valor Pago Inicial (se houver)</label>
                        <input type="number" id="valorPago" class="form-input" step="0.01" min="0" value="0">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Observa√ß√µes</label>
                        <textarea id="observacoes" class="form-input" rows="3" placeholder="Observa√ß√µes importantes..."></textarea>
                    </div>
                    
                    <div class="form-summary">
                        <div class="summary-total">
                            <span>Total:</span>
                            <span id="fiadoTotal">R$ 0,00</span>
                        </div>
                    </div>
                </form>
            </div>
            
            <div class="modal-footer">
                <button class="btn-secondary" id="cancelFiadoModal">
                    Cancelar
                </button>
                <button class="btn-primary" id="saveFiado">
                    Salvar Fiado
                </button>
            </div>
        </div>
    </div>
    
    <!-- MODAL PAGAMENTO FIADO -->
    <div class="modal-overlay" id="pagamentoModal">
        <div class="modal">
            <div class="modal-header success">
                <div class="modal-title">
                    <i class="fas fa-money-bill-wave"></i>
                    <span>Registrar Pagamento</span>
                </div>
                <button class="modal-close" onclick="fecharPagamentoModal()">&times;</button>
            </div>
            
            <div class="modal-body">
                <div id="pagamentoInfo" class="pagamento-info"></div>
                
                <div class="form-group">
                    <label class="form-label">Valor do Pagamento *</label>
                    <input type="number" id="valorPagamento" class="form-input" step="0.01" min="0" placeholder="0.00" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Data do Pagamento</label>
                    <input type="date" id="dataPagamento" class="form-input">
                </div>
                
                <div class="form-group">
                    <label class="form-label">Forma de Pagamento</label>
                    <select id="formaPagamento" class="form-input">
                        <option value="dinheiro">Dinheiro</option>
                        <option value="pix">PIX</option>
                        <option value="cartao">Cart√£o</option>
                        <option value="transferencia">Transfer√™ncia</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Observa√ß√µes</label>
                    <textarea id="obsPagamento" class="form-input" rows="2" placeholder="Observa√ß√µes sobre o pagamento..."></textarea>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn-secondary" onclick="fecharPagamentoModal()">
                    Cancelar
                </button>
                <button class="btn-primary" onclick="confirmarPagamento()">
                    Registrar Pagamento
                </button>
            </div>
        </div>
    </div>
    
    <!-- NOTIFICA√á√ïES -->
    <div class="notification" id="notification"></div>
    
    <!-- Importar M√≥dulos JavaScript -->
    <script type="module" src="js/main.js"></script>
    <script type="module" src="js/produtos.js"></script>
    <script type="module" src="js/relatorio.js"></script>
    <script type="module" src="js/fiados.js"></script>
    <script type="module" src="js/dashboard.js"></script>
</body>
</html>
